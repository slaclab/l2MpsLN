## Records common to all streams


record(bo, "$(USER):WEB:INIT")
{
    field(DTYP, "asynUInt32Digital")
    field(SCAN, "Passive")
    field(OUT, "@asynMask($(PORT), $(ADDR), 1, $(TIMEOUT))INITIALIZE")
    field(ZNAM, "Why")
    field(ONAM, "INIT")
  }


# The DaqMuxV2/DataBufferSize is set to NO:OF:WORDS/2 (as this is expressed in 32-bit words)
record(longin, "$(USER):BUFFER:SIZE")
{
    field(DTYP, "asynInt32")
    field(SCAN, "I/O Intr")
    field(INP, "@asyn($(PORT), $(ADDR), $(TIMEOUT))BUFFER_SIZE")
  }


#Single register for all the things
record(bo, "$(USER):RUN")
{
    field(SCAN, "Passive")
    field(DTYP, "asynUInt32Digital")
    field(OUT, "@asynMask($(PORT),$(ADDR), 1, $(TIMEOUT))RUN")
    #field(PINI, "1")
    field(ZNAM, "STOP")
    field(ONAM, "RUN")
  }


## This in the number of 16-bit words from the user (N) ##
record(ao, "$(USER):NO:OF:WORDS") 
{
  field(DTYP, "asynInt32")
  field(SCAN, "Passive")
  field(DESC, "Buffer size (16-bit words)")
  field(EGU,  "words")
  field(PINI, "YES")
  field(VAL, "$(WAVEFORM_SIZE)")
  field(OUT,  "@asyn($(PORT), $(ADDR), $(TIMEOUT))NO_OF_WORDS")
  info(autosaveFields, "VAL")
}